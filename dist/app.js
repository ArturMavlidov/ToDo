(()=>{"use strict";var t,n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(n||document).querySelector(t)},e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-role~="'.concat(t,'"]'),e)},o=function(t){var n=t.component,e=t.place,o=void 0===e?"beforeend":e,a=t.html;n.insertAdjacentHTML("".concat(o),"".concat(a))},a=function(t,n){return t.closest('[data-role~="'.concat(n,'"]'))},r=new Uint8Array(16);function i(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(t){return"string"==typeof t&&s.test(t)};for(var u=[],d=0;d<256;++d)u.push((d+256).toString(16).substr(1));const f=function(t,n,e){var o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){e=e||0;for(var a=0;a<16;++a)n[e+a]=o[a];return n}return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(u[t[n+0]]+u[t[n+1]]+u[t[n+2]]+u[t[n+3]]+"-"+u[t[n+4]]+u[t[n+5]]+"-"+u[t[n+6]]+u[t[n+7]]+"-"+u[t[n+8]]+u[t[n+9]]+"-"+u[t[n+10]]+u[t[n+11]]+u[t[n+12]]+u[t[n+13]]+u[t[n+14]]+u[t[n+15]]).toLowerCase();if(!c(e))throw TypeError("Stringified UUID is invalid");return e}(o)};const l={set:function(t){localStorage.setItem("tasks",t)},remove:function(){localStorage.removeItem("tasks")},get:function(t){var n=JSON.parse(localStorage.getItem("tasks"))||[];return t&&n.forEach((function(n){t(n)})),n},update:function(t){this.remove(),this.set(JSON.stringify(t))}};function v(t){var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-component~="'.concat(t,'"]'),e)}("todo-tasks",t),i=[],s=function(t){i.push(t),g(t),l.set(JSON.stringify(i))},c=function(t){r.innerHTML="",t.forEach((function(t){o({component:r,html:v(t)})}))},u=function(t){var n=t.target,e=a(n,"task-wrapper"),o=a(n,"task-close");if(e){if(o){var r=e.dataset.id;return i=i.filter((function(t){return t.id!=r})),e.remove(),l.update(i)}var s=e.dataset.id,c=i.find((function(t){return t.id==s}));c.isDone=!c.isDone,d(c),l.update(i)}},d=function(t){var e=t.id,o=t.isDone,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-id~="'.concat(t,'"]'),e)}(e);o?a.classList.add("done"):a.classList.remove("done")},v=function(t){var n=t.isDone?"done":" ";return'<div class="tasks-wrapper '.concat(n,'" data-role="task-wrapper" data-id="').concat(t.id,'">\n              <div class="tasks-item" data-role="tasks-item">\n                <div class="tasks-text">').concat(t.text,'</div>\n                <div class="tasks-date">').concat(t.date,'</div>\n              </div>\n              <div class="tasks-close" data-role="task-close">\n                <svg width="16" height="16">\n                  <use xlink:href="#icon"></use>\n                </svg>\n              </div>\n            </div>')},p=function(t){return t?i.filter((function(t){return 1==t.isDone})):i},g=function(t){o({component:r,html:v(t)})},m=function(){(function(t){var n,o=t.addTask,a=e("add-input"),r=e("add-button"),i=function(){var t,e;return t=(new Date).toLocaleDateString(),e=(new Date).toLocaleTimeString().slice(0,-3),n=t+" "+e,{text:a.value,date:n,isDone:!1,id:f()}},s=function(){""!=i().text.trim()&&o(i()),a.value=""};a.addEventListener("keyup",(function(t){"Enter"===t.code&&s()})),r.addEventListener("click",s)})({addTask:s}),function(t){var n=t.showTasks,o=t.getTasks,a=t.context,r=e("btn-all",a),i=e("btn-done",a),s=function(){n(o(!0))},c=function(){n(o())},u=function(){i.addEventListener("click",s),r.addEventListener("click",c)};u()}({showTasks:c,getTasks:p,context:t}),function(t){var n=t.showTasks,o=t.getTasks,a=t.context,r=e("search-input",a),i=function(t){var e=t.target.value,a=o().filter((function(t){return t.text.toLowerCase().includes(e.toLowerCase())}));n(a)},s=function(){r.addEventListener("input",i)};s()}({showTasks:c,getTasks:p,context:t}),r.addEventListener("click",u),l.get(g),i=l.get()};return m(),{init:m}}document.addEventListener("DOMContentLoaded",(function(){var t=e("todo");t&&v(t)}))})();