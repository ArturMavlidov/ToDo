(()=>{"use strict";var t,e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(e||document).querySelector(t)},n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e('[data-role~="'.concat(t,'"]'),n)},a=function(t){var e=t.component,n=t.place,a=void 0===n?"beforeend":n,s=t.html;e.insertAdjacentHTML("".concat(a),"".concat(s))},s=function(t,e){return t.closest('[data-role~="'.concat(e,'"]'))},o=function(t){var e=t.isDone?"done":" ";return'<div class="tasks-wrapper '.concat(e,'" data-role="task-wrapper" data-id="').concat(t.id,'">\n              <div class="tasks-item" data-role="tasks-item">\n                <input type="text" class="tasks-text" value="').concat(t.text,'" data-role="tasks-value" readonly/>\n                <div class="tasks-date">').concat(t.date,'</div>\n              </div>\n              <div class="task-icons" data-role="task-icons">\n                <svg class="task-close" data-role="task-close" width="16" height="16">\n                  <use xlink:href="#close"></use>\n                </svg>\n                <svg class="task-edit" data-role="task-edit" width="16" height="16">\n                  <use xlink:href="#edit"></use>\n                </svg>\n                <svg class="cancel dn" data-role="task-cancel" width="16" height="16">\n                  <use xlink:href="#cancel"></use>\n                </svg>\n                <svg class="accept dn" data-role="task-accept" width="20" height="20">\n                  <use xlink:href="#accept"></use>\n                </svg>\n              </div>\n            </div>')},r=new Uint8Array(16);function i(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(t){return"string"==typeof t&&c.test(t)};for(var d=[],l=0;l<256;++l)d.push((l+256).toString(16).substr(1));const f=function(t,e,n){var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=a[s];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n}(a)};const v={set:function(t){localStorage.setItem("tasks",t)},remove:function(){localStorage.removeItem("tasks")},get:function(t){var e=JSON.parse(localStorage.getItem("tasks"))||[];return t&&e.forEach((function(e){t(e)})),e},update:function(t){this.remove(),this.set(JSON.stringify(t))}};function g(t){var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e('[data-component~="'.concat(t,'"]'),n)}("todo-tasks",t),i=[],c=function(t){i.push(t),w(t),v.set(JSON.stringify(i))},u=function(t){r.innerHTML="",t.forEach((function(t){a({component:r,html:o(t)})}))},d=function(t){var e=n("task-close",t),a=n("task-edit",t),s=n("task-cancel",t),o=n("task-accept",t);e.classList.toggle("dn"),a.classList.toggle("dn"),s.classList.toggle("dn"),o.classList.toggle("dn")},l=function(t){var e=t.target,a=s(e,"task-wrapper"),o=n("tasks-value",a),r=i.find((function(t){return t.id==a.dataset.id}));o.value=r.text,o.setAttribute("readonly",!0),d(a)},g=function(t){var e=t.target,a=s(e,"task-wrapper"),o=n("tasks-value",a);if(o.setAttribute("readonly",!0),""!=o.value.trim())return d(a),i.find((function(t){return t.id==a.dataset.id})).text=o.value;l({target:e})},k=function(t){var e=t.target,a=s(e,"task-close"),o=s(e,"task-wrapper"),r=s(e,"task-edit");if(o){if(a)return function(t,e){var n=e.dataset.id;return i=i.filter((function(t){return t.id!=n})),e.remove(),v.update(i)}(0,o);(function(t,e){if(t){var a=n("tasks-value",e);d(e),a.removeAttribute("readonly"),a.focus(),a.selectionStart=a.value.length,function(t){var e=n("task-cancel",t),a=n("task-accept",t);e.addEventListener("click",l),a.addEventListener("click",g)}(e)}})(r,o),v.update(i)}},p=function(t){var e=t.target,n=s(e,"task-wrapper");if(n){var a=n.dataset.id,o=i.find((function(t){return t.id==a}));o.isDone=!o.isDone,h(o),v.update(i)}},h=function(t){var n=t.id,a=t.isDone,s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e('[data-id~="'.concat(t,'"]'),n)}(n);a?s.classList.add("done"):s.classList.remove("done")},m=function(t){return t?i.filter((function(t){return 1==t.isDone})):i},w=function(t){a({component:r,html:o(t)})},y=function(){(function(t){var e,a=t.addTask,s=n("add-input"),o=n("todo-form"),r=function(){var t,n;return t=(new Date).toLocaleDateString(),n=(new Date).toLocaleTimeString().slice(0,-3),e=t+" "+n,{text:s.value,date:e,isDone:!1,id:f()}};o.addEventListener("submit",(function(t){t.preventDefault(),""!=r().text.trim()&&a(r()),s.value=""}))})({addTask:c}),function(t){var e=t.showTasks,a=t.getTasks,s=t.context,o=n("btn-all",s),r=n("btn-done",s),i=function(){e(a(!0))},c=function(){e(a())},u=function(){r.addEventListener("click",i),o.addEventListener("click",c)};u()}({showTasks:u,getTasks:m,context:t}),function(t){var e=t.showTasks,a=t.getTasks,s=t.context,o=n("search-input",s),r=function(t){var n=t.target.value,s=a().filter((function(t){return t.text.toLowerCase().includes(n.toLowerCase())}));e(s)},i=function(){o.addEventListener("input",r)};i()}({showTasks:u,getTasks:m,context:t}),r.addEventListener("click",k),r.addEventListener("dblclick",p),v.get(w),i=v.get(),n("tasks-value")};return y(),{init:y}}document.addEventListener("DOMContentLoaded",(function(){var t=n("todo");t&&g(t)}))})();