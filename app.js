(()=>{"use strict";var t,n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(n||document).querySelector(t)},e=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(n||document).querySelectorAll(t)},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-role~="'.concat(t,'"]'),e)},o=function(t){var n=t.component,e=t.place,a=void 0===e?"beforeend":e,o=t.html;n.insertAdjacentHTML("".concat(a),"".concat(o))},r=function(t,n){return t.closest('[data-role~="'.concat(n,'"]'))},i=function(t){var n=t.isDone?"done":" ";return'<div class="tasks-wrapper '.concat(n,'" data-role="task-wrapper" data-id="').concat(t.id,'">\n              <div class="task-item" data-role="task-item">\n                <input type="text" class="tasks-text" value="').concat(t.text,'" data-role="task-value" readonly/>\n                <div class="tasks-date">').concat(t.date,'</div>\n              </div>\n              <div class="task-icons" data-role="task-icons">\n                <svg class="task-icon task-close" data-role="task-close task-icon" width="16" height="16">\n                  <use xlink:href="#close"></use>\n                </svg>\n                <svg class="task-icon task-edit" data-role="task-edit task-icon" width="16" height="16">\n                  <use xlink:href="#edit"></use>\n                </svg>\n                <svg class="task-icon task-done" data-role="task-done task-icon" width="16" height="16">\n                  <use xlink:href="#done"></use>\n                </svg>\n                <svg class="task-icon cancel dn" data-role="task-cancel task-icon" width="16" height="16">\n                  <use xlink:href="#cancel"></use>\n                </svg>\n                <svg class="task-icon accept dn" data-role="task-accept task-icon" width="20" height="20">\n                  <use xlink:href="#accept"></use>\n                </svg>\n              </div>\n            </div>')},s=new Uint8Array(16);function c(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(s)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(t){return"string"==typeof t&&u.test(t)};for(var l=[],f=0;f<256;++f)l.push((f+256).toString(16).substr(1));const v=function(t,n,e){var a=(t=t||{}).random||(t.rng||c)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=a[o];return n}return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(l[t[n+0]]+l[t[n+1]]+l[t[n+2]]+l[t[n+3]]+"-"+l[t[n+4]]+l[t[n+5]]+"-"+l[t[n+6]]+l[t[n+7]]+"-"+l[t[n+8]]+l[t[n+9]]+"-"+l[t[n+10]]+l[t[n+11]]+l[t[n+12]]+l[t[n+13]]+l[t[n+14]]+l[t[n+15]]).toLowerCase();if(!d(e))throw TypeError("Stringified UUID is invalid");return e}(a)};const k={set:function(t){localStorage.setItem("tasks",t)},remove:function(){localStorage.removeItem("tasks")},get:function(t){var n=JSON.parse(localStorage.getItem("tasks"))||[];return t&&n.forEach((function(n){t(n)})),n},update:function(t){this.remove(),this.set(JSON.stringify(t))}};function g(t){var s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-component~="'.concat(t,'"]'),e)}("todo-tasks",t),c=[],u=function(t){c.push(t),y(t),k.set(JSON.stringify(c))},d=function(t){s.innerHTML="",t.forEach((function(t){o({component:s,html:i(t)})}))},l=function(t){var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e('[data-role~="'.concat(t,'"]'),n)}("task-icon",t);n.forEach((function(t){return t.classList.toggle("dn")}))},f=function(t){var n=t.target,e=r(n,"task-wrapper"),o=a("task-value",e),i=c.find((function(t){return t.id==e.dataset.id}));o.value=i.text,o.setAttribute("readonly",!0),l(e)},g=function(t){var n=t.target,e=r(n,"task-wrapper"),o=a("task-value",e);if(o.setAttribute("readonly",!0),""!=o.value.trim())return l(e),c.find((function(t){return t.id==e.dataset.id})).text=o.value;f({target:n})},p=function(t){var n=t.target,e=r(n,"task-wrapper"),o=r(n,"task-close"),i=r(n,"task-edit"),s=r(n,"task-done");if(e){if(s)return function(t,n){var e=t.dataset.id,a=c.find((function(t){return t.id==e}));n.classList.toggle("active"),a.isDone=!a.isDone,h(a),k.update(c)}(e,s);if(o)return function(t){var n=t.dataset.id;return c=c.filter((function(t){return t.id!=n})),t.remove(),k.update(c)}(e);(function(t,n){if(t){var e=a("task-value",n);l(n),e.removeAttribute("readonly"),e.focus(),e.selectionStart=e.value.length,function(t){var n=a("task-cancel",t),e=a("task-accept",t);n.addEventListener("click",f),e.addEventListener("click",g)}(n)}})(i,e),k.update(c)}},h=function(t){var e=t.id,a=t.isDone,o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n('[data-id~="'.concat(t,'"]'),e)}(e);a?o.classList.add("done"):o.classList.remove("done")},m=function(t){return t?c.filter((function(t){return 1==t.isDone})):c},y=function(t){o({component:s,html:i(t)})},w=function(){(function(t){var n,e=t.addTask,o=a("add-input"),r=a("todo-form"),i=function(){var t,e;return t=(new Date).toLocaleDateString(),e=(new Date).toLocaleTimeString().slice(0,-3),n=t+" "+e,{text:o.value,date:n,isDone:!1,id:v()}};r.addEventListener("submit",(function(t){t.preventDefault(),""!=i().text.trim()&&e(i()),o.value=""}))})({addTask:u}),function(t){var n=t.showTasks,e=t.getTasks,o=t.context,r=a("btn-all",o),i=a("btn-done",o),s=function(){n(e(!0))},c=function(){n(e())},u=function(){i.addEventListener("click",s),r.addEventListener("click",c)};u()}({showTasks:d,getTasks:m,context:t}),function(t){var n=t.showTasks,e=t.getTasks,o=t.context,r=a("search-input",o),i=function(t){var a=t.target.value,o=e().filter((function(t){return t.text.toLowerCase().includes(a.toLowerCase())}));n(o)},s=function(){r.addEventListener("input",i)};s()}({showTasks:d,getTasks:m,context:t}),s.addEventListener("click",p),k.get(y),c=k.get()};return w(),{init:w}}document.addEventListener("DOMContentLoaded",(function(){var t=a("todo");t&&g(t)}))})();